processes:
  - name: perm-monitor
    executable: /var/vcap/jobs/perm-monitor/bin/perm-monitor

    args:
    - --log-level
    - <%= p('log_level') %>
    - --perm-hostname
    - <%= p('perm.hostname') %>
    - --perm-port
    - <%= link('perm').p('listen_port') %>
    - --perm-ca-certificate
    - /var/vcap/jobs/perm-monitor/config/certs/perm_ca.crt
    - --statsd-hostname
    - <%= p('statsd.hostname') %>
    - --statsd-port
    - <%= p('statsd.port') %>
    - --admin-probe-interval
    - <%= p('perm.admin_probe_interval') %>
    - --admin-probe-timeout
    - <%= p('perm.admin_probe_timeout') %>
    - --query-probe-interval
    - <%= p('perm.query_probe_interval') %>
    - --query-probe-timeout
    - <%= p('perm.query_probe_timeout') %>

    limits:
      memory: 256M
      processes: 100
      open_files: 524
