---
name: perm-monitor
templates:
  bpm.yml.erb: config/bpm.yml
  perm_ca.crt.erb: config/certs/perm_ca.crt
  uaa_ca.crt.erb: config/certs/uaa_ca.crt
  perm-monitor: bin/perm-monitor

packages:
- perm-monitor

consumes:
- name: perm
  type: perm

properties:
  log_level:
    description: Log level for the Perm monitor.
    default: info

  auth.required:
    description: "Optionally configure the client to authenticate/authorize via OAuth"
    default: false
  auth.client_id:
    description: "Client ID used to authenticate/authorize"
  auth.client_secret:
    description: "Client secret used to authenticate/authorize"
  auth.hostname:
    description: "Hostname of the auth server"
  auth.port:
    description: "Port of the auth server"
  auth.ca_certs:
    description: "A list of certificate authorities used by the auth server, allows multiple in case of rotation"
    default: []

  perm.hostname:
    description: "Hostname of the Perm server"
    default: "perm.service.cf.internal"
  perm.ca_certs:
    description: "A list of certificate authorities used by Perm, allows multiple in case of rotation"
    default: []

  probe.frequency:
    description: "Frequency with which the probe is issued"
    default: 30s
  probe.request_duration:
    description: "Acceptable duration for an individual request"
    default: 100ms
  probe.timeout:
    description: "Time after which the probe will cancel a full run"
    default: 10s

  statsd.hostname:
    description: "Hostname of the StatsD server"
    default: "localhost"
  statsd.port:
    description: "Port of the StatsD server"
    default: 8125
