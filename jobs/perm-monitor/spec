---
name: perm-monitor
templates:
  bpm.yml.erb: config/bpm.yml
  perm_ca.crt.erb: config/certs/perm_ca.crt
  uaa_ca.crt.erb: config/certs/uaa_ca.crt
  perm-monitor: bin/perm-monitor

packages:
- perm-monitor

consumes:
- name: perm
  type: perm

properties:
  log_level:
    description: The log level for the Perm monitor.
    default: info

  auth.required:
    description: "Whether or not auth is required"
    default: false
  auth.client_id:
    description: "The client ID used to authenticate"
  auth.client_secret:
    description: "The client secret used to authenticate"
  auth.hostname:
    description: "The hostname of the UAA server that generates tokens for the client"
  auth.port:
    description: "The port of the UAA server that generates tokens for the client"
  auth.ca_cert:
    description: "The certificate authority used by UAA"

  perm.hostname:
    description: "Hostname used to resolve the address of Perm"
    default: "perm.service.cf.internal"
  perm.ca_certs:
    description: "An array of certificate authorities being used by Perm. Allows multiple in case of rotation."
    default: []

  probe.frequency:
    description: "Frequency with which the probe is issued"
    default: 30s
  probe.request_duration:
    description: "Acceptable duration for an individual request"
    default: 100ms
  probe.timeout:
    description: "Time after which the probe will cancel a full run"
    default: 10s

  statsd.hostname:
    description: "Hostname used to connect to StatsD server"
    default: "localhost"
  statsd.port:
    description: "Port used to connect to StatsD server"
    default: 8125
